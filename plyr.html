
<head>
  <meta charset="UTF-8">
  <title>VIDEO.JS PLAYER</title>
  <meta name="referrer" content="no-referrer">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">

  <!-- Video.js -->
  <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
  <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>

  <style type="text/css">
      body {position:absolute;
        margin: 0;
        padding: 0px;
        background-color: #000000;
        color: #fff;
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        height:100%;width:100%
      }

      .video-container {
        position: absolute ;
        width: 100%;height:100%;
        aspect-ratio: 16/9;
        background-color: #000;
        border-radius: 1px;
        overflow: hidden;
        box-shadow: 0 4px 2px rgba(0,0,0,0.5);
      }

      .shaka-video-container {
        position: absolute ;
        width: 100%;height:100%;aspect-ratio: 16/9;
        background-color: #000;
        border-radius: 1px;
        overflow: hidden;
      }

      video {
        width: 100%;
        height: 100%;
        background-color: #000;
      }

      .video-watermark {
        position: absolute;
        top: 15px;
        left: 15px;
        width: 80px;
        height: 10px;
        opacity: 0.7;
        z-index: 1000;
        pointer-events: none;
      }

      @media (max-width: 768px) {
        body {width:100%;height:100%
          padding: 1px;
        }
        .video-container {
          max-width: 100%;height:100%
        }
      }

      @media (min-width: 769px) and (max-width: 1024px) {
        .video-container {
          max-width: 854px;
        }
      }

      #myLogo {
        width:60px;height:40px;
        position: absolute;
        right: 5px;
        top: 10px;
      }
  </style>
</head>


<div class="video-container">
  <div class="shaka-video-container youtube-theme">
    <!-- Replaced with Video.js -->
    <video id="video" class="video-js vjs-default-skin" autoplay playsinline controls preload="auto"></video>
  </div>
</div>


<script>
  const queryParams = new URLSearchParams(window.location.search);
  const url = queryParams.get('url');

  const channelstreamInfo = {  
    streamUrl: url,
    streamPoster: ""
  };

  let player;

  function initializePlayer() {
    try {
      player = videojs('video', {
        autoplay: true,
        controls: true,
        preload: 'auto',
        muted: false,
        fluid: true,
        aspectRatio: '16:9',
        poster: channelstreamInfo.streamPoster,
        sources: [{
          src: channelstreamInfo.streamUrl,
          type: (channelstreamInfo.streamUrl.endsWith('.mpd') ? 'application/dash+xml' :
                channelstreamInfo.streamUrl.endsWith('.m3u8') ? 'application/x-mpegURL' : 'video/mp4')
        }]
      });

      player.ready(() => {
        console.log('Video.js player ready, loading stream:', channelstreamInfo.streamUrl);
        player.play().catch(err => {
          console.log('Autoplay blocked, retrying with muted audio...');
          player.muted(true);
          player.play().catch(() => console.log('User interaction required'));
        });
      });
    } catch (error) {
      console.error('Error initializing Video.js:', error);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    initializePlayer();
  });
</script>
